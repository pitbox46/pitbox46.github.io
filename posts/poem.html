<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <base href = "../">
		
		<title id="web_titleID">null</title>
		
		<link rel="stylesheet" href="assets/styles/main.css">
    
    </head>
    <body>
        <!-- Header to be filled in via javascript -->
        <div class="header" id="headerID"></div>

        <div id="poem" class="poem">
            <h1 id="poem_titleID">untitled</h1>
            <h4 id="dateID">null</h4>
            <p id="poem_contentID">null</p>
        </div>

        <script type="text/javascript" src="assets/js/header.js"></script>
        <script>
            var TITLE = "untitled";
            var DATE = "July 12, 2022";
    
            window.onload = function() {
                const url = new URL(window.location.toLocaleString());
                const poemNumber = url.searchParams.get('number');

                var directoryPath = "https://raw.githubusercontent.com/pitbox46/pitbox46.github.io/main/posts/poems/";
                fetch(directoryPath + poemNumber + ".json")
                    .then(response => response.json())
                    .then(json => {
                        TITLE = json.title;
                        DATE = new Date(json.date).toLocaleDateString('default', {
                            month:'long',
                            day:'numeric',
                            year:"numeric",
                            timeZone:"UTC"
                        });
                        document.getElementById("web_titleID").innerHTML = TITLE + " - " + DATE;
                        document.getElementById("poem_titleID").innerHTML = TITLE;
                        document.getElementById("dateID").innerHTML = DATE;
                        document.getElementById("poem_contentID").innerHTML = parseJsonPoem(json)
                    });
                loadHeaders();
            }

            function parseJsonPoem(json) {
                return json.poem.join("\n")
            }
        </script>
    </body>
</html>